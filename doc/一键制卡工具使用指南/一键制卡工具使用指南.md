# 一键制卡工具使用指南

# 版本
1.0.9

# 目录

<!-- TOC -->
- [一键制卡工具使用指南](#一键制卡工具使用指南)
- [版本](#版本)
- [目录](#目录)
- [1 简介](#1-简介)
  - [1.1 产品简介](#11-产品简介)
  - [1.2 系统要求](#12-系统要求)
  - [1.3 系统框图](#13-系统框图)
- [2 软件安装与卸载](#2-软件安装与卸载)
  - [2.1 软件安装](#21-软件安装)
  - [2.2 软件卸载](#22-软件卸载)
- [3 常用操作](#3-常用操作)
  - [3.1 镜像烧录](#31-镜像烧录)
    - [<font color=red>注意事项</font>](#font-colorred注意事项font)
    - [3.1.1 镜像列表选择在线镜像进行下载烧录](#311-镜像列表选择在线镜像进行下载烧录)
      - [操作场景](#操作场景)
      - [3.1.1.1 选择镜像进行下载烧录](#3111-选择镜像进行下载烧录)
        - [操作场景](#操作场景-2)
        - [<font color=red>注意事项</font>](#font-colorred注意事项font-1)
        - [操作步骤](#操作步骤-1)
    - [3.1.2 本地镜像文件进行烧录](#313-本地镜像文件进行烧录)
      - [操作场景](#操作场景-4)
      - [<font color=red>注意事项</font>](#font-colorred注意事项font-3)
      - [操作步骤](#操作步骤-3)
  - [3.2 镜像回读备份](#32-镜像回读备份)
    - [操作场景](#操作场景-5)
    - [<font color=red>注意事项</font>](#font-colorred注意事项font-4)
    - [操作步骤](#操作步骤-4)
- [4 FAQ](#4-faq)
  - [4.1 同时烧录多张卡后，出现错误。](#42-同时烧录多张卡后出现错误)
    - [问题描述](#问题描述-1)
    - [解决方案](#解决方案-1)
  

<!-- /TOC -->

# 1 简介
## 1.1 产品简介
一键制卡工具用于制作昇腾Atlas 200DK开发板的镜像。通过使用该工具，用户可以使用本地镜像文件或在线镜像文件快速地烧录到SD卡中，也可以对SD卡进行镜像回读备份操作。

该软件基于开源的[rpi-imager](https://github.com/raspberrypi/rpi-imager)进行了定制化开发，在此基础上增加了镜像回读备份功能，并且将默认的镜像列表地址指向昇腾开发者套件的镜像仓。
## 1.2 系统要求
1. 需要准备的物品：
    - TF卡（Trans-flash Card），又称Micro SD Card。
    - TF卡读卡器
2. 安装运行一键制卡工具的系统要求如下：
    - 操作系统：windows10专业版
    - 系统的USB读写功能正常
    - C盘和安装盘的剩余空间大小大于200MB
    - 如果使用在线镜像下载功能，需要连接互联网,建议宽带网络大于100M。
    - C盘剩余空间应保持充足(C盘剩余空间 - 在线镜像大小 > 5GB)，否则无法缓存在线下载的镜像
3. 一键制卡工具提供的在线镜像支持的硬件如下：
    | 硬件 |  OS  |
    |-----| -----|
    |Atlas 200I DK A2 开发者套件（型号 310B）| Ubuntu 22.04 |
    |Atlas 200 DK 开发者套件（型号 3000）| Ubuntu 18.04 |
4. 为了好的显示效果，推荐使用1080p的显示器，缩放倍率设置100%
    

## 1.3 系统框图
<div align=center><img src="https://foruda.gitee.com/images/1660269837166432020/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></div>

# 2 软件安装与卸载
## 2.1 软件安装
1. 点击软件安装包`A200dk_imager_x.x.x_win10-x86_64.exe`，在弹出的 **Windows 已保护你的电脑** 中选择 **更多信息**
     ![输入图片说明](https://foruda.gitee.com/images/1669452952901325089/ab20fdf5_1925050.png "屏幕截图")
2. 在弹窗中,点击**仍要运行**
    ![输入图片说明](https://foruda.gitee.com/images/1669452976343424258/0816362b_1925050.png "屏幕截图")
3. 在弹出的 **用户账户对话框** 中选择 **是** 。
   ![输入图片说明](https://foruda.gitee.com/images/1669454890052288749/bf378380_1925050.png "屏幕截图")
4. 在安装导向界面选择  **Next** 。
    ![输入图片说明](https://foruda.gitee.com/images/1671693180454434666/1abbc0bc_1925050.png "屏幕截图")
5. 选择安装路径，默认路径为`C:\Program Files (x86)\Ascend AI Devkit Imager`，点击 **Install** 。
    ![输入图片说明](https://foruda.gitee.com/images/1671693224938487416/04be620c_1925050.png "屏幕截图")
6. 等待片刻，安装完成点击 **Finish** ，默认勾选 **Run Ascend AI Devkit Imager** 就会启动镜像烧录工具。
    ![输入图片说明](https://foruda.gitee.com/images/1671693318744034371/ac28cad8_1925050.png "屏幕截图")
7. 运行镜像烧录工具。
    ![输入图片说明](https://foruda.gitee.com/images/1679968169899608549/2d613aa2_1925050.png "屏幕截图")
## 2.2 软件卸载
1. 选择控制面板，程序，点击 **卸载程序** 。
    ![输入图片说明](https://images.gitee.com/uploads/images/2022/0724/160650_020ba46e_9317615.png "屏幕截图.png")
2. 在 **卸载或更换程序** 对话框当中找到 Ascend AI Devkit Imager。
   ![输入图片说明](https://foruda.gitee.com/images/1671693643653772296/c8c6a2a3_1925050.png "屏幕截图")
3. 在Ascend AI Devkit Imager一行当中鼠标点击右键，选择 **卸载/更改(U)** ，在弹出的 **用户账户对话框** 中选择 **是**。
4. 在Ascend AI Devkit Imager Uninstall卸载界面确认卸载信息，点击 **Uninstall** 进行卸载。
    ![输入图片说明](https://foruda.gitee.com/images/1671693726041942652/5366fed0_1925050.png "屏幕截图")
5. 或者在程序的安装位置中找到 **uninstall.exe**程序，并运行程序
    ![输入图片说明](https://foruda.gitee.com/images/1671693800264331411/e2949a95_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1671694118675979157/88967f0d_1925050.png "屏幕截图")
6. 卸载完成点击 **Finish** 。
    ![输入图片说明](https://foruda.gitee.com/images/1671694141170679012/c0d6ab98_1925050.png "屏幕截图")
# 3 常用操作
## 3.1 镜像烧录
### <font color=red>注意事项</font>
  镜像烧录同一时刻只支持一张SD卡进行烧录操作。
### 3.1.1 镜像列表选择在线镜像进行下载烧录
#### 操作场景
  从服务端提供的镜像列表(可通过json文件更新)当中选择镜像下载烧录到SD卡中。
#### 3.1.1.1 选择镜像进行下载烧录
##### 操作场景
  从镜像列表中选择需要的镜像文件，下载烧录到SD卡中。
##### <font color=red>注意事项</font>
1. C盘剩余空间应保持充足(C盘剩余空间 - 在线镜像大小 > 5GB)，否则将不会对下载文件进行缓存。
2. 工具提供的在线镜像都是定制化（修改了分区头和sectorRsv）的镜像，必须通过本制卡工具写入SD卡中，不能下载镜像到本地再通过本制卡工具或其他制卡工具写入到SD卡中，否则烧录的镜像不能在200DK上启动。
3. 制卡完成后的SD卡，插到DK上，首次上电的启动，需要等待3分钟左右，才能SSH登录。  --- 扩容是高危动作，不能下电、不能拔出SD卡，否则要重新制卡。

##### 操作步骤
1. 点击 **选择在线制卡** 按钮。
    ![输入图片说明](https://foruda.gitee.com/images/1679968272697520247/ea40c49b_1925050.png "屏幕截图")
2. 选择要下载的镜像。
    ![输入图片说明](https://foruda.gitee.com/images/1679968322170147147/31294a87_1925050.png "屏幕截图")
3. 点击 **配置网络信息** 按钮，选择配置镜像的网口ip信息，可以不修改，使用默认配置（仅Atlas 200I Dk A2 在线镜像支持配置ip）
    ![输入图片说明](https://foruda.gitee.com/images/1679968376315202793/3110b228_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679968396746981376/16e39815_1925050.png "屏幕截图")
3. 选择SD卡。
    ![输入图片说明](https://foruda.gitee.com/images/1679968439350594525/2b54515f_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679968463467020052/07918faa_1925050.png "屏幕截图")
4. 点击 **烧录镜像** 按钮，开始烧录。
    ![输入图片说明](https://foruda.gitee.com/images/1679968490960546464/b7e58196_1925050.png "屏幕截图")
5. 等待烧写完成。
    ![输入图片说明](https://foruda.gitee.com/images/1679968510234083859/b61782e6_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679969226498089278/8c020a3a_1925050.png "屏幕截图")
### 3.1.2 本地镜像文件进行烧录
#### 操作场景
  用户选择本地镜像文件进行烧录到SD卡中。
#### <font color=red>注意事项</font>
1. 本地文件支持.img/.zip/.iso/.gz/.xz/.zst格式。
2. 镜像文件名支持 英文字母、数字、中文、下划线。
#### 操作步骤
1. 点击 **本地制卡** 按钮。
    ![输入图片说明](https://foruda.gitee.com/images/1679969325096152205/32b1c711_1925050.png "屏幕截图")
2. 点击 **选择文件** 按钮(也可以在本地镜像文件点击鼠标右键在打开方式中选择 "Ascend aI Devkit Imager" 选择本地镜像文件)。
    ![输入图片说明](https://foruda.gitee.com/images/1679969374196138498/83b49680_1925050.png "屏幕截图")
3. 在弹出选择文件框选择本地路径镜像文件。
   ![输入图片说明](https://foruda.gitee.com/images/1679969402907357950/9ec51817_1925050.png "屏幕截图")
4. 选择SD卡。
    ![输入图片说明](https://foruda.gitee.com/images/1679968439350594525/2b54515f_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679968463467020052/07918faa_1925050.png "屏幕截图")
5. 点击 **烧录镜像** 按钮，开始烧录。
    ![输入图片说明](https://foruda.gitee.com/images/1679969484060923208/aa58bbfa_1925050.png "屏幕截图")
6. 等待烧写完成。
    ![输入图片说明](https://foruda.gitee.com/images/1679969515511783633/4e7783b3_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679970209355968163/6f8f5923_1925050.png "屏幕截图")
## 3.2 镜像回读备份
### 操作场景
  回读SD卡中的全量数据，保存到本地镜像文件中，以便下次还原该SD卡内容。
### <font color=red>注意事项</font>
  镜像文件名支持 英文字母、数字、中文、下划线。
### 操作步骤
1. 点击 **备份SD卡** 按钮。
    ![输入图片说明](https://foruda.gitee.com/images/1679970240841528290/c091ddb2_1925050.png "屏幕截图")
2. 点击下面的输入框。
    ![输入图片说明](https://foruda.gitee.com/images/1679970274155625627/d4734160_1925050.png "屏幕截图")
3. 在文件弹出框中选择镜像备份的地址，并修改保存镜像名称。
   ![输入图片说明](https://foruda.gitee.com/images/1679970298250007400/02cb442a_1925050.png "屏幕截图")
4. 选择SD卡。
    ![输入图片说明](https://foruda.gitee.com/images/1679970318931513659/8803114c_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679970332725741928/fa4839c0_1925050.png "屏幕截图")
5. 点击 **备份** 按钮，弹窗弹出是否压缩备份文件。选择 **是**，备份文件以zip压缩；选择 **不**，备份文件不压缩。
    ![输入图片说明](https://foruda.gitee.com/images/1679970358610663280/2aea5f3e_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679970381141569209/f10fae2e_1925050.png "屏幕截图")
6. 备份完成。
    ![输入图片说明](https://foruda.gitee.com/images/1679970437178727556/6dda3baf_1925050.png "屏幕截图")
    ![输入图片说明](https://foruda.gitee.com/images/1679971439192904932/587fb011_1925050.png "屏幕截图")
# 4 FAQ
## 4.1 同时烧录多张卡后，出现错误。
### 问题描述
打开多个程序同时进行多张SD卡烧录，烧录后，对指定SD卡进行格式化，可能会出现下列情况：
    ![输入图片说明](https://foruda.gitee.com/images/1679971824639453879/8039eb7f_1925050.png "屏幕截图")
### 解决方案
拔出所有SD卡，再插入要格式化的SD，单独进行格式化即可。